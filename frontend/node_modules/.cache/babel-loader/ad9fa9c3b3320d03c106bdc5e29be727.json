{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction once(emitter, name, {\n  signal\n} = {}) {\n  return new Promise((resolve, reject) => {\n    function cleanup() {\n      signal === null || signal === void 0 ? void 0 : signal.removeEventListener('abort', cleanup);\n      emitter.removeListener(name, onEvent);\n      emitter.removeListener('error', onError);\n    }\n\n    function onEvent(...args) {\n      cleanup();\n      resolve(args);\n    }\n\n    function onError(err) {\n      cleanup();\n      reject(err);\n    }\n\n    signal === null || signal === void 0 ? void 0 : signal.addEventListener('abort', cleanup);\n    emitter.on(name, onEvent);\n    emitter.on('error', onError);\n  });\n}\n\nexports.default = once;","map":null,"metadata":{},"sourceType":"script"}